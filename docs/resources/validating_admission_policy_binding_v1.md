---
subcategory: "admissionregistration/v1"
page_title: "Kubernetes: kubernetes_validating_admission_policy_binding_v1"

description: |-
  A Validating Admission Policy Binding describes the definition of an admission validation policy binding which binds to a valid ValidatingAdmissionPolicy with paramerized resources.
---

# kubernetes_validating_admission_policy_binding_v1

A Validating Admission Policy Binding describes the definition of an admission validation policy binding which binds to a valid ValidatingAdmissionPolicy with paramerized resources.



<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `spec` (Attributes) Rule defining a set of permissions for the role (see [below for nested schema](#nestedatt--spec))

### Optional

- `id` (String) The unique ID for this terraform resource
- `metadata` (Attributes) Standard object's metadata. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata (see [below for nested schema](#nestedatt--metadata))
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

<a id="nestedatt--spec"></a>
### Nested Schema for `spec`

Required:

- `policy_name` (String) PolicyName references a ValidatingAdmissionPolicy name which the ValidatingAdmissionPolicyBinding binds to. If the referenced resource does not exist, this binding is considered invalid and will be ignored
- `validation_actions` (String) ValidationActions declares how Validations of the referenced ValidatingAdmissionPolicy are enforced. If a validation evaluates to false it is always enforced according to these actions.

	Failures defined by the ValidatingAdmissionPolicy's FailurePolicy are enforced according
	to these actions only if the FailurePolicy is set to Fail, otherwise the failures are
	ignored. This includes compilation errors, runtime errors and misconfigurations of the policy.

	ValidationActions is declared as a set of action values. Order does not matter. validationActions may not contain duplicates of the same action.

    The supported actions values are:
    - <code>Deny</code> specifies that a validation failure results in a denied request.
    - <code>Warn</code> specifies that a validation failure is reported to the request client in HTTP Warning headers, with a warning code of 299. Warnings can be sent both for allowed or denied admission responses.
    - <code>Audit</code> specifies that a validation failure is included in the published audit event for the request.

    More details on: https://kubernetes.io/docs/reference/kubernetes-api/policy-resources/validating-admission-policy-binding-v1/
    <code>Deny</code> and <code>Warn</code> may not be used together since this combination needlessly duplicates the validation failure both in the API response body and the HTTP warning headers.

Optional:

- `match_resources` (Attributes) MatchResources declares what resources match this binding and will be validated by it. 

  Note that this is intersected with the policy's <code>matchConstraints</code>, so only requests that are matched by the policy can be selected by this.
If this is unset, all resources matched by the policy are validated by this binding. When resourceRules is unset, it does not constrain resource matching. If a resource is matched by the other fields of this object, it will be validated. (see [below for nested schema](#nestedatt--spec--match_resources))
- `param_ref` (Attributes) ParamRef specifies the parameter resource used to configure the admission control policy.
	It should point to a resource of the type specified in <code>ParamKind</code> of the bound ValidatingAdmissionPolicy. If the policy specifies a <code>ParamKind</code> and the resource referred to by <code>ParamRef</code> does not exist, this binding is considered mis-configured and the FailurePolicy of the ValidatingAdmissionPolicy applied.

  If the policy does not specify a <code>ParamKind</code> then this field is ignored, and the rules are evaluated without a param. (see [below for nested schema](#nestedatt--spec--param_ref))

<a id="nestedatt--spec--match_resources"></a>
### Nested Schema for `spec.match_resources`

Optional:

- `exclude_resource_rules` (Attributes List) ExcludeResourceRules describes what operations on what resources/subresources the ValidatingAdmissionPolicy should not care about. (see [below for nested schema](#nestedatt--spec--match_resources--exclude_resource_rules))
- `match_policy` (String) matchPolicy defines how the MatchResources list is used to match incoming requests. Allowed values are Exact or Equivalent.
- `namespace_selector` (Attributes) NamespaceSelector decides whether to run the admission control policy on an object based on whether the namespace for that object matches the selector. (see [below for nested schema](#nestedatt--spec--match_resources--namespace_selector))
- `object_selector` (Attributes) ObjectSelector decides whether to run the validation based on if the object has matching labels. (see [below for nested schema](#nestedatt--spec--match_resources--object_selector))
- `resource_rules` (Attributes List) ResourceRules describes what operations on what resources/subresources the ValidatingAdmissionPolicy matches. (see [below for nested schema](#nestedatt--spec--match_resources--resource_rules))

<a id="nestedatt--spec--match_resources--exclude_resource_rules"></a>
### Nested Schema for `spec.match_resources.exclude_resource_rules`

Required:

- `api_groups` (List of String) APIGroups is the API groups the resources belong to. '\*' is all groups. If '\*' is present, the length of the slice must be one.
- `api_versions` (List of String) APIVersions is the API versions the resources belong to. '\*' is all versions. If '\*' is present, the length of the slice must be one. Required.
- `operations` (List of String) Operations is the operations the admission hook cares about - CREATE, UPDATE, DELETE, CONNECT or * for all of those operations and any future admission operations that are added.
- `resources` (List of String) Resources is a list of resources this rule applies to.

Optional:

- `resource_names` (List of String) ResourceNames is an optional white list of names that the rule applies to. An empty set means that everything is allowed.
- `scope` (String) scope specifies the scope of this rule.


<a id="nestedatt--spec--match_resources--namespace_selector"></a>
### Nested Schema for `spec.match_resources.namespace_selector`

Optional:

- `match_expressions` (Attributes List) matchExpressions is a list of label selector requirements. The requirements are ANDed. (see [below for nested schema](#nestedatt--spec--match_resources--namespace_selector--match_expressions))
- `match_labels` (Map of String) matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.

<a id="nestedatt--spec--match_resources--namespace_selector--match_expressions"></a>
### Nested Schema for `spec.match_resources.namespace_selector.match_labels`

Optional:

- `key` (String) key is the label key that the selector applies to.
- `operator` (String) operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
- `values` (List of String) values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.



<a id="nestedatt--spec--match_resources--object_selector"></a>
### Nested Schema for `spec.match_resources.object_selector`

Optional:

- `label_selector` (Attributes) A label query over a set of resources (see [below for nested schema](#nestedatt--spec--match_resources--object_selector--label_selector))

<a id="nestedatt--spec--match_resources--object_selector--label_selector"></a>
### Nested Schema for `spec.match_resources.object_selector.label_selector`

Optional:

- `match_expressions` (Attributes List) matchExpressions is a list of label selector requirements. The requirements are ANDed. (see [below for nested schema](#nestedatt--spec--match_resources--object_selector--label_selector--match_expressions))
- `match_labels` (Map of String) matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.

<a id="nestedatt--spec--match_resources--object_selector--label_selector--match_expressions"></a>
### Nested Schema for `spec.match_resources.object_selector.label_selector.match_expressions`

Optional:

- `key` (String) key is the label key that the selector applies to.
- `operator` (String) operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
- `values` (List of String) values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.




<a id="nestedatt--spec--match_resources--resource_rules"></a>
### Nested Schema for `spec.match_resources.resource_rules`

Required:

- `api_groups` (List of String) APIGroups is the API groups the resources belong to. '\*' is all groups. If '\*' is present, the length of the slice must be one.
- `api_versions` (List of String) APIVersions is the API versions the resources belong to. '\*' is all versions. If '\*' is present, the length of the slice must be one. Required.
- `operations` (List of String) Operations is the operations the admission hook cares about - CREATE, UPDATE, DELETE, CONNECT or * for all of those operations and any future admission operations that are added.
- `resources` (List of String) Resources is a list of resources this rule applies to.

Optional:

- `resource_names` (List of String) ResourceNames is an optional white list of names that the rule applies to. An empty set means that everything is allowed.
- `scope` (String) scope specifies the scope of this rule.



<a id="nestedatt--spec--param_ref"></a>
### Nested Schema for `spec.param_ref`

Optional:

- `name` (String) Name is the name of the resource being referenced. One of ***name*** or ***selector*** field must be set, but both are mutually exclusive properties. If one is set, the other must be unset. A single parameter used for all admission requests can be configured by setting the `name` field, leaving `selector` blank, and setting namespace if `paramKind` is namespace-scoped.
- `namespace` (String) Namespace is the namespace of the referenced resource. Allows limiting the search for params to a specific namespace. Applies to both ***name*** and ***selector*** fields.
  A per-namespace parameter may be used by specifying a namespace-scoped <code>paramKind</code> in the policy and leaving this field empty.
	  - If paramKind is cluster-scoped, this field MUST be **unset**. Setting this field results in a configuration error.
	  - If paramKind is namespace-scoped, the namespace of the object being evaluated for admission will be used when this field is left unset.

  Take care that if this is left empty the binding must not match any cluster-scoped resources, which will result in an error.
- `parameter_not_found_action` (String) ParameterNotFoundAction controls the behavior of the binding when the resource exists, and ***name*** or ***selector*** is valid, but there are no parameters matched by the binding. 

  If the value is set to "Allow", then no matched parameters will be treated as successful validation by the binding.
	If set to "Deny", then no matched parameters will be subject to the <code>failurePolicy</code> of the policy.

	Allowed values are "Allow" or "Deny", if not set by default the value is "Deny"
- `selector` (Attributes) Selector can be used to match multiple param objects based on their labels. If multiple params are found, they are all evaluated with the policy expressions and the results are ANDed together.

  One of ***name*** or ***selector*** field must be set, but both are mutually exclusive properties. If one is set, the other must be unset. (see [below for nested schema](#nestedatt--spec--param_ref--selector))

<a id="nestedatt--spec--param_ref--selector"></a>
### Nested Schema for `spec.param_ref.selector`

Optional:

- `match_expressions` (Attributes List) matchExpressions is a list of label selector requirements. The requirements are ANDed. (see [below for nested schema](#nestedatt--spec--param_ref--selector--match_expressions))
- `match_labels` (Map of String) matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.

<a id="nestedatt--spec--param_ref--selector--match_expressions"></a>
### Nested Schema for `spec.param_ref.selector.match_labels`

Optional:

- `key` (String) key is the label key that the selector applies to.
- `operator` (String) operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
- `values` (List of String) values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.





<a id="nestedatt--metadata"></a>
### Nested Schema for `metadata`

Optional:

- `annotations` (Map of String) Annotations is an unstructured key value map stored with a resource that may be set by external tools to store and retrieve arbitrary metadata. They are not queryable and should be preserved when modifying objects. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations
- `generate_name` (String) GenerateName is an optional prefix, used by the server, to generate a unique name ONLY IF the Name field has not been provided. If this field is used, the name returned to the client will be different than the name passed. This value will also be combined with a unique suffix. The provided value has the same validation rules as the Name field, and may be truncated by the length of the suffix required to make the value unique on the server.
If this field is specified and the generated name exists, the server will return a 409.
Applied only if Name is not specified. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#idempotency
- `generation` (Number) A sequence number representing a specific generation of the desired state. Populated by the system. Read-only.
- `labels` (Map of String) Map of string keys and values that can be used to organize and categorize (scope and select) objects. May match selectors of replication controllers and services. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/labels
- `name` (String) Name must be unique within a namespace. Is required when creating resources, although some resources may allow a client to request the generation of an appropriate name automatically. Name is primarily intended for creation idempotence and configuration definition. Cannot be updated. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names#names
- `namespace` (String) Namespace defines the space within which each name must be unique. An empty namespace is equivalent to the "default" namespace, but "default" is the canonical representation. Not all objects are required to be scoped to a namespace - the value of this field for those objects will be empty.
Must be a DNS_LABEL. Cannot be updated. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces
- `resource_version` (String) An opaque value that represents the internal version of this object that can be used by clients to determine when objects have changed. May be used for optimistic concurrency, change detection, and the watch operation on a resource or set of resources. Clients must treat these values as opaque and passed unmodified back to the server. They may only be valid for a particular resource or set of resources.
Populated by the system. Read-only. Value must be treated as opaque by clients and . More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#concurrency-control-and-consistency
- `uid` (String) UID is the unique in time and space value for this object. It is typically generated by the server on successful creation of a resource and is not allowed to change on PUT operations.
Populated by the system. Read-only. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names#uids


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
- `read` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Read operations occur during any refresh or planning operation when refresh is enabled.
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).

## Example Usage

```terraform
resource "kubernetes_validating_admission_policy_binding_v1" "example" {
  metadata = {
    name = "test-policy-binding"
  }

  spec = {
    policy_name = "test-policy"

    validation_actions = ["Deny"]

    param_ref = {
      name                        = "test-policy-binding"
      namespace                   = "test-namespace"
      parameter_not_found_action  = "Deny"
    }
  }
}
```

## Import

Validating Admission Policy can be imported using the name, e.g.

```
$ terraform import kubernetes_validating_admission_policy_binding_v1.example terraform-example
```
